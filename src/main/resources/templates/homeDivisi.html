<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title> Dashboard Divisi </title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            .ml-30{
                margin-left:30px;
            }
            .br-15{
                border-radius: 15px;
            }
        </style>
    </head>
    <body class="col-lg-12" style="background-color:white">
        <!-- <div th:replace="fragments/user::header"></div> -->
    <center>

        <div style='text-align: left'>
            <font class='h2'> <strong> Dashboard Admin Divisi </strong> </font>
        </div>
        <div class="row">
            <div class="container pt-4">
                <div style='text-align: right'>
                    <input type="submit" name="logout" value="Logout" class="btn btn-primary pl-5 pr-5 mt-4">
                    <input type="submit" name="toregister" value="Register User" class="btn btn-primary pl-5 pr-5 mt-4">
                </div>
                <div class="col-15 shadow pt-3 pb-5 br-15 mt-4 mb-5 pr-5 p-5" style="background-color: white">
                    <table border="0" class="table table-striped" id="myTable"> 
                        <thead class="thead-dark">
                            <tr>
                                <th>ID</th>
                                <th>Judul Laporan</th>
                                <th>Tanggal</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="as : ${laporan}">
                                <td th:text="${as.id}">ID</td>
                                <td th:text="${as.judulLaporan}">Judul Laporan</td>
                                <td th:text="${as.tanggalLaporan}">Tanggal</td>
                                <td th:text="${as.currentStatus.id}">Status</td>
                                <td>
                                    <a type="button" 
                                       class="btn btn-primary edit-modal text-light" 
                                       data-toggle="modal" 
                                       data-target="#modal1"
                                       th:data-id="${as.id}"
                                       th:data-judullaporan="${as.judulLaporan}"
                                       th:data-isilaporan="${as.isiLaporan}"
                                       th:data-tanggallaporan="${as.tanggalLaporan}"
                                       th:data-status="${as.currentStatus.id}"
                                       th:data-division="${as.divisi.id}"
                                       th:data-deskripsistatus="${as.deskripsiStatus}"
                                       >
                                        Update
                                    </a>
                                </td>
                            </tr>
                            <!-- not yet -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </center>

    <div th:replace="fragments/laporan::detailLaporan"></div>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script>
        $(document).on("click", ".edit-modal", function () {

            var id = $(this).data('id');
            var judulLaporan = $(this).data('judullaporan');
            var isiLaporan = $(this).data('isilaporan');
            var tanggalLaporan = $(this).data('tanggallaporan');
            var status = $(this).data('status');
            var division = $(this).data('division');
            var deskripsiStatus = $(this).data('deskripsistatus');

            $(".modal-body #id").val(id);
            $(".modal-body #judullaporan").val(judulLaporan);
            $(".modal-body #isiLaporan").val(isiLaporan);
            $(".modal-body #tanggalLaporan").val(tanggalLaporan);
            $(".modal-body #status").val(status);
            $(".modal-body #division").val(division);
            $(".modal-body #deskripsiStatus").val(deskripsiStatus);

            if ($('#status').val() == 2) {
                $('#status').prop("disabled", "disabled");
            } else if ($('#status').val() == 4) {
                $('#status').prop("disabled", "disabled");
            } else {
                $('#status').prop("disabled", false);
            }
        });
    </script>
</body>
</html>
